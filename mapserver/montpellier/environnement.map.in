LAYER
    NAME 'courseau'
    TYPE POLYGON
    STATUS ON
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    DATA "geom FROM (SELECT geo.geom as geom, texte, gid FROM geodata.courseau AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'courseau') AS foo USING UNIQUE gid USING srid=3857"
    PROJECTION
        "init=epsg:3857"
    END
    MAXSCALEDENOM 3500
    TOLERANCE 10
    LABELITEM "texte"
    CLASS
        NAME "Cours d'eau"
        STYLE
            SYMBOL "circle"
            SIZE 8
            WIDTH 1
            OUTLINECOLOR 0 0 64
            COLOR 0 0 232
        END
        LABEL
            COLOR  0 0 64
            OUTLINECOLOR 192 192 255
            FONT "arial"
            TYPE truetype
            SIZE 8
            POSITION auto
            PARTIALS FALSE
            MAXSCALEDENOM 15000
        END

    END

    METADATA
        "wms_title" "Cours d'eau" # For WMS
        "wms_srs" "epsg:3857" # For WMS

        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Cours-d-eau" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL
    END
    VALIDATION
        ${mapserver_layer_validation} # For secured layers
    END
    VALIDATION
        ${mapserver_layer_validation}
    END
END

LAYER
    NAME 'bassinsversants'
    TYPE POLYGON
    STATUS ON
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    DATA "geom FROM (SELECT geo.geom as geom, nom, gid FROM geodata.bassinsversants AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'bassinsversants') AS foo USING UNIQUE gid USING srid=3857"
    PROJECTION
        "init=epsg:3857"
    END
    MAXSCALEDENOM 3500
    TOLERANCE 10
    LABELITEM "nom"
    CLASS
        NAME "Bassins versants"
        STYLE
            SYMBOL "circle"
            SIZE 8
            WIDTH 2
            OUTLINECOLOR 0 0 64
            OPACITY 50
            COLOR 0 0 232
        END
        LABEL
            COLOR  0 0 64
            OUTLINECOLOR 100 100 255
            FONT "arial"
            TYPE truetype
            SIZE 8
            POSITION auto
            PARTIALS FALSE
            MAXSCALEDENOM 15000
        END

    END

    METADATA
        "wms_title" "Bassins versants" # For WMS
        "wms_srs" "epsg:3857" # For WMS

        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Bassins-Versants" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL
    END
    VALIDATION
        ${mapserver_layer_validation} # For secured layers
    END
    VALIDATION
        ${mapserver_layer_validation}
    END
END
