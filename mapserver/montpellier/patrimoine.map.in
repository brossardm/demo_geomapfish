LAYER
    NAME 'monuments'
    TYPE POINT
    STATUS ON
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    DATA "geom FROM (SELECT geo.geom as geom, gid, nom FROM geodata.monuments AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'monuments') AS foo USING UNIQUE gid USING srid=3857"
    DUMP TRUE # For GetFeatureInfo
    PROJECTION
        "init=epsg:3857"
    END
    MAXSCALEDENOM 3500
    TOLERANCE 10
    LABELITEM "nom"
    CLASS
        NAME "Monuments"
        STYLE
            SYMBOL "circle"
            SIZE 8
            WIDTH 1
            OUTLINECOLOR 50 50 50
            COLOR 100 100 100
        END
        LABEL
            COLOR  50 50 50
            OUTLINECOLOR 200 200 200
            FONT "arial"
            TYPE truetype
            SIZE 8
            POSITION lc
            PARTIALS FALSE
            MAXSCALEDENOM 15000
        END
    END

    METADATA
        "wms_title" "Monuments" # For WMS
        "wms_srs" "epsg:3857" # For WMS

        "gml_include_items" "geom,nom"  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "gml_types" "auto"
        "gml_featureid" "id"
        "wfs_enable_request" "*"
        "gml_geometries" "geom"
        "gml_geom_type" "point"

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Monuments" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL
    END
    VALIDATION
        ${mapserver_layer_validation} # For secured layers
    END
    VALIDATION
        ${mapserver_layer_validation}
    END
END
LAYER
    NAME 'fontaines'
    TYPE POINT
    STATUS ON
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    DATA "geom FROM (SELECT geo.geom as geom, gid, nom, categorie FROM geodata.fontaines AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'fontaines') AS foo USING UNIQUE gid USING srid=3857"
    DUMP TRUE # For GetFeatureInfo
    PROJECTION
        "init=epsg:3857"
    END
    #MAXSCALEDENOM 3500
    TOLERANCE 10
    LABELITEM "nom"
    CLASS
        NAME "Fontaines"
        STYLE
            SYMBOL "circle"
            SIZE 8
            WIDTH 1
            OUTLINECOLOR 0 0 80
            COLOR 0 0 200
        END
        LABEL
            COLOR  0 0 150
            OUTLINECOLOR 200 200 255
            FONT "arial"
            TYPE truetype
            SIZE 8
            POSITION lc
            PARTIALS FALSE
            MAXSCALEDENOM 15000
        END
    END

    METADATA
        "wms_title" "Fontaines" # For WMS
        "wms_srs" "epsg:3857" # For WMS

        "gml_include_items" "nom,categorie"  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "point" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Bornes-fontaines" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL
    END
    VALIDATION
        ${mapserver_layer_validation} # For secured layers
    END
    VALIDATION
        ${mapserver_layer_validation}
    END
END
LAYER
    NAME 'sitesclasses'
    TYPE POLYGON
    STATUS ON
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    DATA "geom FROM (SELECT geo.geom as geom, coment, gid FROM geodata.sitesclasses AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'sitesclasses') AS foo USING UNIQUE gid USING srid=3857"
    DUMP TRUE # For GetFeatureInfo
    PROJECTION
      "init=epsg:3857"
    END
    #MAXSCALEDENOM 3500
    TOLERANCE 10
    CLASSITEM "coment"
    CLASS
        NAME "Sites classés"
        EXPRESSION "Site Classé"
        STYLE
            SYMBOL "hatch"
            SIZE 8
            WIDTH 1
            OUTLINECOLOR 0 0 80
            COLOR 0 0 220
            ANGLE 45
        END
    END
   CLASS
        NAME "Sites inscrits"
        EXPRESSION "Site Inscrit"
        STYLE
            SYMBOL "hatch"
            SIZE 8
            WIDTH 1
            OUTLINECOLOR 0 0 80
            COLOR 150 150 240
            ANGLE 45
        END
    END

    METADATA
        "wms_title" "Sites classés" # For WMS
        "wms_srs" "epsg:3857" # For WMS

        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Sites-classes-et-inscrits" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL
    END
    VALIDATION
        ${mapserver_layer_validation} # For secured layers
    END
    VALIDATION
        ${mapserver_layer_validation}
    END
END
LAYER
    NAME 'zonepietonne'
    TYPE POLYGON
    STATUS ON
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    DATA "geom FROM (SELECT geo.geom as geom, gid FROM geodata.zonepietonne AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'zonepietonne') AS foo USING UNIQUE gid USING srid=3857"
    DUMP TRUE # For GetFeatureInfo
    PROJECTION
        "init=epsg:3857"
    END
    TOLERANCE 10
    CLASS
        NAME "Zone piétonne"
        STYLE
          SYMBOL "hatch"
          SIZE 8
          WIDTH 1
          OUTLINECOLOR 0 0 80
          COLOR 200 0 0
          ANGLE 135
        END
    END

    METADATA
        "wms_title" "Zones piétonne"
        "wms_srs" "epsg:3857"

        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Zones-pietonnes" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL
    END
    VALIDATION
        ${mapserver_layer_validation} # For secured layers
    END
    VALIDATION
        ${mapserver_layer_validation}
    END
END
